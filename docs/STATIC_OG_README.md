# Static Open Graph Support for Social Media Crawlers

## Problem
Social media crawlers (Facebook, Twitter, LINE, Discord, Telegram, etc.) don't execute JavaScript, so they can't see the dynamic meta tags generated by our React application. This means that when users share links to our site, the previews show generic meta tags instead of page-specific information.

## Solution
We implemented a hybrid approach that provides both static meta tags for crawlers AND dynamic meta tags for interactive users:

### 1. Static HTML Generation
- **Build Script**: `scripts/generate-static-pages.js` generates static HTML files for each route
- **Route-Specific Files**: Each route gets its own `index.html` with pre-rendered meta tags
- **Build Integration**: Runs automatically after `vite build` as part of the deployment process

### 2. How It Works
1. **Vite builds the app** → generates production assets and base HTML
2. **Static script runs** → reads the built HTML and creates route-specific versions
3. **Deploy to GitHub Pages** → static files are available for crawlers

### 3. File Structure After Build
```
dist/
├── index.html                    (homepage with OG tags)
├── calendar/index.html          (calendar page with OG tags)  
├── search/index.html            (search page with OG tags)
├── schedules/
│   ├── teacher/index.html       (teacher schedule with OG tags)
│   ├── class/index.html         (class schedule with OG tags)
│   └── location/index.html      (location schedule with OG tags)
├── map/index.html               (campus map with OG tags)
├── timetable/index.html         (timetable with OG tags)
└── assets/                      (CSS/JS bundles)
```

### 4. Benefits
- **For Crawlers**: Static HTML with proper OG tags (no JavaScript needed)
- **For Users**: Full React SPA experience with dynamic meta tag updates
- **SEO Friendly**: Each route has its own canonical URL and meta description
- **Zero Dependencies**: No external prerendering libraries needed

### 5. Maintained Functionality
- ✅ React Router navigation works normally
- ✅ Dynamic SEO component still updates meta tags on client-side
- ✅ All interactive features work as expected
- ✅ Theme switching, search, and other JS features work
- ✅ Build process is reliable and fast

## Technical Details

### Scripts
- `pnpm run build` - Full build process (TypeScript + Vite + Static generation)
- `pnpm run generate-static` - Run static generation only (for testing)

### Configuration
- Route meta tags are defined in `scripts/generate-static-pages.js`
- Site configuration (base URL) is centralized in the script
- Matches the existing configuration in `src/config/meta.ts`

### Meta Tags Generated
Each static page includes:
- `<title>` - Page-specific title in Traditional Chinese
- `<meta name="description">` - Route-specific description  
- `<meta name="keywords">` - Relevant keywords
- `<meta property="og:*">` - Open Graph tags for social media
- `<meta name="twitter:*">` - Twitter Card tags
- `<link rel="canonical">` - Canonical URL for SEO

## Testing
To verify the implementation works:

1. **Build and Preview**:
   ```bash
   pnpm run build
   pnpm run preview
   ```

2. **Check Static Files**:
   ```bash
   # View generated meta tags for each route
   head -30 dist/calendar/index.html
   head -30 dist/search/index.html
   ```

3. **Test Social Media**:
   - Share URLs on Facebook, Twitter, Discord, etc.
   - Check that proper titles and descriptions appear in previews

## Deployment
The GitHub Actions workflow automatically:
1. Builds the TypeScript and Vite bundle
2. Runs the static generation script  
3. Deploys the `dist/` folder to GitHub Pages

No changes to the existing deployment process were needed.